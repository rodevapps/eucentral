import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.BVOCwoKb.js";const g=a=>{const[n,m]=i.useState([]);return i.useEffect(()=>{let r=[];for(let l of a.errors)l.field===a.field&&r.push(l.message);console.log(r),m(r)},[a.errors]),e.jsx(e.Fragment,{children:n.map((r,l)=>e.jsx("p",{className:"text-sm text-red-600 dark:text-red-500",children:e.jsx("small",{children:e.jsx("strong",{children:r})})},l))})},N=()=>{const[a,n]=i.useState([]),[m,r]=i.useState([{message:"Registration currently inactive!"}]),[l,h]=i.useState(!1),b=async t=>{t.preventDefault();const o=t.currentTarget.elements.degree.value,c=t.currentTarget.elements.name.value,d=t.currentTarget.elements.surname.value,u=t.currentTarget.elements.email.value,p=t.currentTarget.elements.institution.value;let s=[];if(c.length===0&&s.push({field:"name",message:"Name is required!"}),c.length<2&&s.push({field:"name",message:"Name must have 2 or more letters!"}),d.length===0&&s.push({field:"surname",message:"Surname is required!"}),d.length<2&&s.push({field:"surname",message:"Surname must have 2 or more letters!"}),u.length===0&&s.push({field:"email",message:"Email is required!"}),u.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/)===null&&s.push({field:"email",message:"Email must be valid!"}),s.length===0)try{const x=await(await fetch("http://localhost:3000/api/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
              mutation CreateRegistration($data: mutationRegistrationInput!) {
                createRegistration(data: $data) {
                  degree
                  name
                  surname
                  email
                  institution
                }
              }
            `,variables:{data:{degree:o,name:c,surname:d,email:u,institution:p}}})})).json();x.errors!==void 0&&x.errors.length?r(x.errors):(t.target.elements.degree.value="",t.target.elements.name.value="",t.target.elements.surname.value="",t.target.elements.email.value="",t.target.elements.institution.value="",n([]),r([]),h(!0))}catch{r([{message:"An unknown error occurred during sending data to the server. Please contact with site maintainers."}])}else n(s)};return e.jsxs("div",{className:"sm:pl-2",children:[e.jsx("div",{className:"w-full text-center mb-4",children:e.jsx("h3",{children:e.jsx("strong",{children:"Registration to the conference"})})}),m.length>0&&e.jsx("div",{className:"max-w-md mx-auto mb-4 text-center bg-red-500 py-2",children:m.map((t,o)=>e.jsx("p",{className:"text-white",children:e.jsx("strong",{children:e.jsx("small",{children:t.message})})},o))}),l&&e.jsx("div",{className:"max-w-md mx-auto mb-4 text-center bg-green-500 py-2",children:e.jsx("p",{className:"text-white",children:e.jsx("strong",{children:e.jsx("small",{children:"Thank you for your registration!"})})})}),e.jsxs("form",{className:"max-w-md mx-auto",onSubmit:b,children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"degree",className:"block mb-2 text-sm font-medium text-gray-900",children:"Scientific degree"}),e.jsx("input",{type:"text",id:"degree","aria-describedby":"helper-text-explanation-degree",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Prof."}),e.jsx("p",{id:"helper-text-explanation-degree",className:"text-sm text-gray-500",children:e.jsx("small",{children:"Your scientific degree if you have, eg. Prof. Dr"})})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900",children:"Name*"}),e.jsx("input",{type:"text",id:"name","aria-describedby":"helper-text-explanation-name",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"John"}),e.jsx("p",{id:"helper-text-explanation-name",className:"text-sm text-gray-500",children:e.jsx("small",{children:"Your name, eg. Elen, John."})}),e.jsx(g,{field:"name",errors:a})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"surname",className:"block mb-2 text-sm font-medium text-gray-900",children:"Surname*"}),e.jsx("input",{type:"text",id:"surname","aria-describedby":"helper-text-explanation-surname",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Doe"}),e.jsx("p",{id:"helper-text-explanation-surname",className:"text-sm text-gray-500",children:e.jsx("small",{children:"Your surname eg. Doe, Smith."})}),e.jsx(g,{field:"surname",errors:a})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900",children:"Email*"}),e.jsx("input",{type:"email",id:"email","aria-describedby":"helper-text-explanation-email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"example@example.com"}),e.jsx("p",{id:"helper-text-explanation-email",className:"text-sm text-gray-500",children:e.jsx("small",{children:"Your email. Weâ€™ll never share your email."})}),e.jsx(g,{field:"email",errors:a})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"institution",className:"block mb-2 text-sm font-medium text-gray-900",children:"Institution"}),e.jsx("input",{type:"text",id:"institution","aria-describedby":"helper-text-explanation-institution",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Oxford"}),e.jsx("p",{id:"helper-text-explanation-institution",className:"text-sm text-gray-500",children:e.jsx("small",{children:"Your institution eg. MIT, Oxford."})})]}),e.jsx("button",{type:"submit",disabled:!0,className:"text-white bg-blue-700 cursor-not-allowed hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium text-sm w-full px-5 py-2.5 text-center",children:"Register"})]})]})};export{N as default};
